{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shirs/OneDrive/Documents/Desktop/Crownship/src/lib/db.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nimport { Product, User } from './types';\r\n\r\nconst dataDir = path.join(process.cwd(), 'data');\r\nexport const productsFile = path.join(dataDir, 'products.json');\r\nexport const usersFile = path.join(dataDir, 'users.json');\r\n\r\n// Ensure data directory exists (lazy check, though write_to_file handles creation, runtime needs it too)\r\nif (!fs.existsSync(dataDir)) {\r\n    fs.mkdirSync(dataDir, { recursive: true });\r\n}\r\n\r\nfunction readJSON(file: string) {\r\n    if (!fs.existsSync(file)) {\r\n        // Initialize with empty array if missing\r\n        writeJSON(file, []);\r\n        return [];\r\n    }\r\n    try {\r\n        const data = fs.readFileSync(file, 'utf-8');\r\n        return JSON.parse(data);\r\n    } catch (error) {\r\n        console.error(`Error reading ${file}:`, error);\r\n        return [];\r\n    }\r\n}\r\n\r\nfunction writeJSON(file: string, data: any) {\r\n    fs.writeFileSync(file, JSON.stringify(data, null, 2));\r\n}\r\n\r\nexport const db = {\r\n    products: {\r\n        getAll: () => readJSON(productsFile) as Product[],\r\n        getById: (id: string) => (readJSON(productsFile) as Product[]).find(p => p.id === id),\r\n    },\r\n    users: {\r\n        findByEmail: (email: string) => (readJSON(usersFile) as User[]).find(u => u.email === email),\r\n        create: (user: User) => {\r\n            const users = readJSON(usersFile) as User[];\r\n            users.push(user);\r\n            writeJSON(usersFile, users);\r\n            return user;\r\n        }\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAIA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAClC,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,SAAS;AACxC,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,SAAS;AAE5C,yGAAyG;AACzG,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,UAAU;IACzB,wGAAE,CAAC,SAAS,CAAC,SAAS;QAAE,WAAW;IAAK;AAC5C;AAEA,SAAS,SAAS,IAAY;IAC1B,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,OAAO;QACtB,yCAAyC;QACzC,UAAU,MAAM,EAAE;QAClB,OAAO,EAAE;IACb;IACA,IAAI;QACA,MAAM,OAAO,wGAAE,CAAC,YAAY,CAAC,MAAM;QACnC,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC,EAAE;QACxC,OAAO,EAAE;IACb;AACJ;AAEA,SAAS,UAAU,IAAY,EAAE,IAAS;IACtC,wGAAE,CAAC,aAAa,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,MAAM;AACtD;AAEO,MAAM,KAAK;IACd,UAAU;QACN,QAAQ,IAAM,SAAS;QACvB,SAAS,CAAC,KAAe,AAAC,SAAS,cAA4B,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACtF;IACA,OAAO;QACH,aAAa,CAAC,QAAkB,AAAC,SAAS,WAAsB,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;QACtF,QAAQ,CAAC;YACL,MAAM,QAAQ,SAAS;YACvB,MAAM,IAAI,CAAC;YACX,UAAU,WAAW;YACrB,OAAO;QACX;IACJ;AACJ"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shirs/OneDrive/Documents/Desktop/Crownship/src/app/api/products/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { db } from '@/lib/db';\r\n\r\nexport async function GET() {\r\n    const products = db.products.getAll();\r\n    return NextResponse.json(products);\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,WAAW,wHAAE,CAAC,QAAQ,CAAC,MAAM;IACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B"}}]
}